(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b781b50"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"22f1":function(e,t,a){"use strict";a("f855")},"58b2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.clickAdd("alipay")}}},[e._v("添加支付宝服务商")]),a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.clickAdd("wxpay")}}},[e._v("添加微信服务商")]),a("div",{staticStyle:{float:"right"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"320px"},attrs:{placeholder:"服务商名称/AppId",size:"small",clearable:""},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.doSearch()}},slot:"append"})],1)],1)],1),a("el-table",{attrs:{data:e.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.tableIndex}}),a("el-table-column",{attrs:{prop:"title",label:"服务商名称",width:"300"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["alipay"===t.row.type?a("span",[e._v("支付宝服务商")]):e._e(),"wxpay"===t.row.type?a("span",[e._v("微信服务商")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"appid",label:"AppId",width:"200"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(a){return a.preventDefault(),e.clickEdit(t.row.id)}}},[e._v("编辑 ")]),a("el-button",{attrs:{type:"text text-danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.preventDefault(),e.clickDel(t.row.id)}}},[e._v("删除")])],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.dataTotal},on:{"current-change":e.pageChange}}),e.form?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e.formTitle,width:"660px",visible:!0,"close-on-click-modal":!1,"before-close":e.formClose}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"服务商名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"服务商名称",size:"small"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"title"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:"alipay"}},[e._v("支付宝服务商")]),a("el-radio",{attrs:{label:"wxpay"}},[e._v("微信服务商")])],1)],1),"alipay"===e.form.type?a("div",[a("el-form-item",{attrs:{label:"AppId",prop:"appid"}},[a("el-input",{attrs:{placeholder:"第三方平台应用AppId",size:"small"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),a("el-form-item",{attrs:{label:"PID",prop:"pid"}},[a("el-input",{attrs:{placeholder:"服务商PID",size:"small"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1),a("el-form-item",{attrs:{label:"商户私钥",prop:"private_key"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"商户私钥",size:"small"},model:{value:e.form.private_key,callback:function(t){e.$set(e.form,"private_key",t)},expression:"form.private_key"}})],1),a("el-form-item",{attrs:{label:"支付宝公钥",prop:"public_key"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"支付宝公钥",size:"small"},model:{value:e.form.public_key,callback:function(t){e.$set(e.form,"public_key",t)},expression:"form.public_key"}})],1)],1):e._e(),"wxpay"===e.form.type?a("div",[a("el-form-item",{attrs:{label:"AppId",prop:"appid"}},[a("el-input",{attrs:{placeholder:"公众号AppId",size:"small"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appsecret"}},[a("el-input",{attrs:{placeholder:"公众号AppSecret",size:"small"},model:{value:e.form.appsecret,callback:function(t){e.$set(e.form,"appsecret",t)},expression:"form.appsecret"}})],1),a("el-form-item",{attrs:{label:"商户号",prop:"mch_id"}},[a("el-input",{attrs:{placeholder:"服务商商户号mch_id",size:"small"},model:{value:e.form.mch_id,callback:function(t){e.$set(e.form,"mch_id",t)},expression:"form.mch_id"}})],1),a("el-form-item",{attrs:{label:"Api密钥",prop:"key"}},[a("el-input",{attrs:{placeholder:"Api密钥key",size:"small"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1),a("el-form-item",{attrs:{label:"cert证书"}},[a("el-upload",{attrs:{action:"",data:{type:"cert"},"before-upload":e.uploadCheck,"http-request":e.uploadPem,"on-success":e.uploadSuccess,"show-file-list":!1,multiple:!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1),e.form.apiclient_cert?a("span",{staticClass:"upload_status"},[e._v("已上传")]):e._e()],1),a("el-form-item",{attrs:{label:"key证书"}},[a("el-upload",{attrs:{action:"",data:{type:"key"},"before-upload":e.uploadCheck,"http-request":e.uploadPem,"on-success":e.uploadSuccess,"show-file-list":!1,multiple:!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1),e.form.apiclient_key?a("span",{staticClass:"upload_status"},[e._v("已上传")]):e._e()],1)],1):e._e(),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入备注",size:"small"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.formClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.clickSubmit}},[e._v("提 交")])],1)],1)],1):e._e()],1)},l=[],i=(a("ac1f"),a("841c"),a("b0c0"),a("aa22")),s={data:function(){return{form:null,formType:null,search:{},dataList:[],dataTotal:0,page:1,pagesize:10,formRules:{title:[{required:!0,message:"此项必填",trigger:"blur"}],appid:[{required:!0,message:"此项必填",trigger:"blur"}],pid:[{required:!0,message:"此项必填",trigger:"blur"}],private_key:[{required:!0,message:"此项必填",trigger:"blur"}],public_key:[{required:!0,message:"此项必填",trigger:"blur"}],appsecret:[{required:!0,message:"此项必填",trigger:"blur"}],mch_id:[{required:!0,message:"此项必填",trigger:"blur"}],key:[{required:!0,message:"此项必填",trigger:"blur"}],apiclient_cert:[{required:!0,message:"此项必填",trigger:"blur"}],apiclient_key:[{required:!0,message:"此项必填",trigger:"blur"}]}}},computed:{formTitle:function(){return"add"===this.formType?"添加服务商":"编辑"}},mounted:function(){this.getList()},methods:{getList:function(){var e=this,t={page:this.page,pagesize:this.pagesize,keyword:this.search.keyword};Object(i["c"])(t).then((function(t){var a=t.data;e.dataList=a.list,e.dataTotal=t.data.count}))},tableIndex:function(e){return this.pagesize*(this.page-1)+e+1},pageChange:function(e){this.page=e,this.getList()},clickAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"alipay";this.formType="add",this.form={type:e}},clickEdit:function(e){var t=this;Object(i["b"])({id:e}).then((function(e){t.formType="edit",t.form=e.data}))},formClose:function(){this.form=null,this.formType=""},clickSubmit:function(){var e=this;this.$refs.form.validate((function(t){t?Object(i["d"])(e.form).then((function(t){e.getList(),e.$message({message:t.message,type:"success",duration:1500}),e.formClose()})):console.log("请按照规则填写表单")}))},clickDel:function(e){var t=this;this.$confirm("删除后不可恢复，同时使用此服务商配置的商户将不能继续收款，请谨慎操作，确认删除吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])({id:e}).then((function(e){t.getList(),t.$message({message:e.message,type:"success",duration:1500})}))}))},uploadCheck:function(e){if("pem"!==e.name.substr(-3))return this.$message({showClose:!0,message:"请上传后缀为.pem的证书文件",type:"warning"}),!1},uploadPem:function(e){var t=this,a=new FormData;a.append("file",e.file),e.data&&a.append("data",JSON.stringify(e.data)),Object(i["e"])(a).then((function(a){"cert"===e.data.type?t.$set(t.form,"apiclient_cert",a.data):"key"===e.data.type&&t.$set(t.form,"apiclient_key",a.data),t.$message.success("上传成功")}))},doSearch:function(){this.page=1,this.getList()}}},o=s,n=(a("22f1"),a("2877")),c=Object(n["a"])(o,r,l,!1,null,"6423015a",null);t["default"]=c.exports},"841c":function(e,t,a){"use strict";var r=a("d784"),l=a("825a"),i=a("1d80"),s=a("129f"),o=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var i=l(e),n=String(this),c=i.lastIndex;s(c,0)||(i.lastIndex=0);var p=o(i,n);return s(i.lastIndex,c)||(i.lastIndex=c),null===p?-1:p.index}]}))},aa22:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return n}));var r=a("b775");function l(e){return Object(r["a"])({url:"/server/getList",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/server/getInfo",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/server/saveInfo",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/server/del",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/upload/pem",method:"post",data:e})}},f855:function(e,t,a){}}]);